<ul class="download">
<li><a href="https://github.com/mperdeck/AWS-articles/tree/master/4" target="_blank">Download templates, scripts, sample app</a></li>
</ul>

<h2>Introduction</h2>
<p>
    This is part 4 of a 
    <a href="http://www.codeproject.com/search.aspx?q=amazon+web+services+perdeck&x=0&y=0&sbo=kw" target="_blank">series of articles</a>
     about deploying your site to 
    <a href="http://aws.amazon.com/" target="_blank">Amazon Web Services</a> (AWS), 
    Amazon's counterpart to <a href="http://azure.microsoft.com/en-us/" target="_blank">Windows Azure</a>.
</p>
<p>
    In parts 1, 2 and 3, you saw how to deploy a load balanced IIS based web site with a SQL Server database and its own domain name.
</p>
<a id="architecture"></a>
<img src="architecture.png" width="400" />

<p>
    Those parts showed how to do this using 
the AWS service
                <a href="http://aws.amazon.com/elasticbeanstalk/" target="_blank">Elastic Beanstalk</a>. 
    This allows you to define a configuration with EC2 servers, database server, etc. by completing a series of menus.
</p>
<p>
    This article introduces AWS 
    <a href="http://aws.amazon.com/cloudformation/" target="_blank">CloudFormation</a>.
    This service too lets you create servers and deploy code. But instead of completing menus, you express your desired configuration
    in a text file called a template. You then tell CloudFormation to &quot;launch&quot; this template to create a &quot;stack&quot; - AWS 
    speak for the servers, etc. you specified in the template.
</p>
<p>
    Each stack has a name, such as &quot;Live&quot; or &quot;Test&quot;. To change the server configuration
    for a stack, you first change the template and then tell CloudFormation to update the stack. It will then
    migrate your stack to the desired configuration expressed in your new template, with as little disruption as possible.  
</p>
<p>
    CloudFormation gives you much more control than Elastic Beanstalk, but there are many more details to get right - and many ways
    to get it wrong. I found that the learning curve can be quite steep.
</p>

<h2>What is in this article</h2>
<p>
    This article shows how to:
</p>
<ul>
    <li>
        Deploy all web and database servers and other infrastructure, as specified in a CloudFormation template (a text file);
    </li>
    <li>
        And then deploy the code of an ASP.NET web site;
    </li>
    <li>
        Update the web.config of the site with the server name and login details of the RDS database;
    </li>
    <li>
        Get IIS, etc. started on the web servers so the site is up and running;
    </li>
    <li>
        All fully hands off, by running a single PowerShell script.
    </li>
</ul>
<p>
    After you've deployed your servers and web sites, you can use the same PowerShell script to update your configuration:
</p>
<ul>
    <li>
        If you changed your CloudFormation template, for example to add or remove servers,
        all required changes will be made automatically with minimal disruption;
    </li>
    <li>
        If you created a new version of your web site code, the web servers will be upgraded automatically:
        <ul>
            <li>
        Rather than taking all servers off line, the servers are upgraded one by one to minimize disruption.
            </li>
            <li>
        Instead of upgrading servers in place, new servers are created running the new software and servers running the old software 
        are terminated. This ensures your servers are all in the same known state after an upgrade. 
            </li>
        </ul>
    </li>
</ul>

<h2>Why use CloudFormation?</h2>
<p>
    Why would you express your desired server configuration in a text file and then
    have 
    CloudFormation
    build that configuration for you? Why not launch the servers yourself from the AWS management console?
</p>
<ul>
<li>
    <b>Repeatable</b> - Having your configuration in a text file makes it trivial to create
    a new environment with the same configuration. For example, make a carbon copy of your live environment
    for testing purposed.
</li>
<li>
    <b>Source control</b> - 
    A text file can easily be stored in your 
    favorite source control system, such as GIT or TFS. Keep track of changes,
    roll back to previous versions, etc.
</li>
<li>
    <b>Documentation</b> -
    A text files makes it easier to figure out what bits and pieces of infrastructure
    you have lying around.
</li>
    </ul>
<p>
    Essentially, CloudFormation lets you manage your infrastructure in a similar way to
    the code base of your web site.
</p>

<h2>Solution Overview</h2>

<h3>Infrastructure goal</h3>
<p>
    The goal is to deploy a web site that uses a database and that has its own domain. The infrastructure
    is going to look like this:
</p>
<img src="cfarchitecture.png" width="500" />













<h2>Detailed installation steps</h2>




---------------------------------------
@@@@@@@@@@@@@@@@@@
pricing
multi-az








